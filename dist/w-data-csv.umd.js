/*!
 * w-data-csv v1.0.2
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("fs"),require("csv-parser"),require("strip-bom-stream")):"function"==typeof define&&define.amd?define(["fs","csv-parser","strip-bom-stream"],r):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-data-csv"]=r(t.fs,t["csv-parser"],t["strip-bom-stream"])}(this,(function(t,r,e){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u=Array.isArray,i="object"==typeof n&&n&&n.Object===Object&&n,a=i,c="object"==typeof self&&self&&self.Object===Object&&self,f=a||c||Function("return this")(),l=f.Symbol,s=l,v=Object.prototype,p=v.hasOwnProperty,h=v.toString,y=s?s.toStringTag:void 0;var d=function(t){var r=p.call(t,y),e=t[y];try{t[y]=void 0;var n=!0}catch(t){}var o=h.call(t);return n&&(r?t[y]=e:delete t[y]),o},b=Object.prototype.toString;var g=d,_=function(t){return b.call(t)},j=l?l.toStringTag:void 0;var O=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":j&&j in Object(t)?g(t):_(t)};var w=function(t){return null!=t&&"object"==typeof t},m=O,S=w;var A=function(t){return"symbol"==typeof t||S(t)&&"[object Symbol]"==m(t)},z=u,x=A,P=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/;var k=function(t,r){if(z(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!x(t))||(E.test(t)||!P.test(t)||null!=r&&t in Object(r))};var T=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)},$=O,F=T;var N,I=function(t){if(!F(t))return!1;var r=$(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},M=f["__core-js_shared__"],B=(N=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+N:"";var C=function(t){return!!B&&B in t},R=Function.prototype.toString;var U=function(t){if(null!=t){try{return R.call(t)}catch(t){}try{return t+""}catch(t){}}return""},D=I,q=C,L=T,V=U,W=/^\[object .+?Constructor\]$/,J=Function.prototype,G=Object.prototype,H=J.toString,K=G.hasOwnProperty,Q=RegExp("^"+H.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var X=function(t){return!(!L(t)||q(t))&&(D(t)?Q:W).test(V(t))},Y=function(t,r){return null==t?void 0:t[r]};var Z=function(t,r){var e=Y(t,r);return X(e)?e:void 0},tt=Z(Object,"create"),rt=tt;var et=function(){this.__data__=rt?rt(null):{},this.size=0};var nt=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},ot=tt,ut=Object.prototype.hasOwnProperty;var it=function(t){var r=this.__data__;if(ot){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return ut.call(r,t)?r[t]:void 0},at=tt,ct=Object.prototype.hasOwnProperty;var ft=tt;var lt=et,st=nt,vt=it,pt=function(t){var r=this.__data__;return at?void 0!==r[t]:ct.call(r,t)},ht=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ft&&void 0===r?"__lodash_hash_undefined__":r,this};function yt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}yt.prototype.clear=lt,yt.prototype.delete=st,yt.prototype.get=vt,yt.prototype.has=pt,yt.prototype.set=ht;var dt=yt;var bt=function(){this.__data__=[],this.size=0};var gt=function(t,r){return t===r||t!=t&&r!=r},_t=gt;var jt=function(t,r){for(var e=t.length;e--;)if(_t(t[e][0],r))return e;return-1},Ot=jt,wt=Array.prototype.splice;var mt=jt;var St=jt;var At=jt;var zt=bt,xt=function(t){var r=this.__data__,e=Ot(r,t);return!(e<0)&&(e==r.length-1?r.pop():wt.call(r,e,1),--this.size,!0)},Pt=function(t){var r=this.__data__,e=mt(r,t);return e<0?void 0:r[e][1]},Et=function(t){return St(this.__data__,t)>-1},kt=function(t,r){var e=this.__data__,n=At(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function Tt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Tt.prototype.clear=zt,Tt.prototype.delete=xt,Tt.prototype.get=Pt,Tt.prototype.has=Et,Tt.prototype.set=kt;var $t=Tt,Ft=Z(f,"Map"),Nt=dt,It=$t,Mt=Ft;var Bt=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var Ct=function(t,r){var e=t.__data__;return Bt(r)?e["string"==typeof r?"string":"hash"]:e.map},Rt=Ct;var Ut=Ct;var Dt=Ct;var qt=Ct;var Lt=function(t,r){var e=qt(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this},Vt=function(){this.size=0,this.__data__={hash:new Nt,map:new(Mt||It),string:new Nt}},Wt=function(t){var r=Rt(this,t).delete(t);return this.size-=r?1:0,r},Jt=function(t){return Ut(this,t).get(t)},Gt=function(t){return Dt(this,t).has(t)},Ht=Lt;function Kt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Kt.prototype.clear=Vt,Kt.prototype.delete=Wt,Kt.prototype.get=Jt,Kt.prototype.has=Gt,Kt.prototype.set=Ht;var Qt=Kt,Xt=Qt;function Yt(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],u=e.cache;if(u.has(o))return u.get(o);var i=t.apply(this,n);return e.cache=u.set(o,i)||u,i};return e.cache=new(Yt.Cache||Xt),e}Yt.Cache=Xt;var Zt=Yt;var tr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rr=/\\(\\)?/g,er=function(t){var r=Zt(t,(function(t){return 500===e.size&&e.clear(),t})),e=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(tr,(function(t,e,n,o){r.push(n?o.replace(rr,"$1"):e||t)})),r}));var nr=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o},or=nr,ur=u,ir=A,ar=l?l.prototype:void 0,cr=ar?ar.toString:void 0;var fr=function t(r){if("string"==typeof r)return r;if(ur(r))return or(r,t)+"";if(ir(r))return cr?cr.call(r):"";var e=r+"";return"0"==e&&1/r==-Infinity?"-0":e},lr=fr;var sr=u,vr=k,pr=er,hr=function(t){return null==t?"":lr(t)};var yr=function(t,r){return sr(t)?t:vr(t,r)?[t]:pr(hr(t))},dr=A;var br=function(t){if("string"==typeof t||dr(t))return t;var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r},gr=yr,_r=br;var jr=function(t,r){for(var e=0,n=(r=gr(r,t)).length;null!=t&&e<n;)t=t[_r(r[e++])];return e&&e==n?t:void 0},Or=jr;var wr=function(t,r,e){var n=null==t?void 0:Or(t,r);return void 0===n?e:n};var mr={},Sr={get exports(){return mr},set exports(t){mr=t}};var Ar=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==r(t[e],e,t););return t};var zr=function(t){return function(r,e,n){for(var o=-1,u=Object(r),i=n(r),a=i.length;a--;){var c=i[t?a:++o];if(!1===e(u[c],c,u))break}return r}}();var xr=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n},Pr=O,Er=w;var kr=function(t){return Er(t)&&"[object Arguments]"==Pr(t)},Tr=w,$r=Object.prototype,Fr=$r.hasOwnProperty,Nr=$r.propertyIsEnumerable,Ir=kr(function(){return arguments}())?kr:function(t){return Tr(t)&&Fr.call(t,"callee")&&!Nr.call(t,"callee")},Mr=Ir,Br={};var Cr=function(){return!1};!function(t,r){var e=f,n=Cr,o=r&&!r.nodeType&&r,u=o&&t&&!t.nodeType&&t,i=u&&u.exports===o?e.Buffer:void 0,a=(i?i.isBuffer:void 0)||n;t.exports=a}({get exports(){return Br},set exports(t){Br=t}},Br);var Rr=/^(?:0|[1-9]\d*)$/;var Ur=function(t,r){var e=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&Rr.test(t))&&t>-1&&t%1==0&&t<r};var Dr=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},qr=O,Lr=Dr,Vr=w,Wr={};Wr["[object Float32Array]"]=Wr["[object Float64Array]"]=Wr["[object Int8Array]"]=Wr["[object Int16Array]"]=Wr["[object Int32Array]"]=Wr["[object Uint8Array]"]=Wr["[object Uint8ClampedArray]"]=Wr["[object Uint16Array]"]=Wr["[object Uint32Array]"]=!0,Wr["[object Arguments]"]=Wr["[object Array]"]=Wr["[object ArrayBuffer]"]=Wr["[object Boolean]"]=Wr["[object DataView]"]=Wr["[object Date]"]=Wr["[object Error]"]=Wr["[object Function]"]=Wr["[object Map]"]=Wr["[object Number]"]=Wr["[object Object]"]=Wr["[object RegExp]"]=Wr["[object Set]"]=Wr["[object String]"]=Wr["[object WeakMap]"]=!1;var Jr=function(t){return Vr(t)&&Lr(t.length)&&!!Wr[qr(t)]};var Gr=function(t){return function(r){return t(r)}},Hr={};!function(t,r){var e=i,n=r&&!r.nodeType&&r,o=n&&t&&!t.nodeType&&t,u=o&&o.exports===n&&e.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=a}({get exports(){return Hr},set exports(t){Hr=t}},Hr);var Kr=Jr,Qr=Gr,Xr=Hr&&Hr.isTypedArray,Yr=Xr?Qr(Xr):Kr,Zr=xr,te=Mr,re=u,ee=Br,ne=Ur,oe=Yr,ue=Object.prototype.hasOwnProperty;var ie=function(t,r){var e=re(t),n=!e&&te(t),o=!e&&!n&&ee(t),u=!e&&!n&&!o&&oe(t),i=e||n||o||u,a=i?Zr(t.length,String):[],c=a.length;for(var f in t)!r&&!ue.call(t,f)||i&&("length"==f||o&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||ne(f,c))||a.push(f);return a},ae=Object.prototype;var ce=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||ae)};var fe=function(t,r){return function(e){return t(r(e))}}(Object.keys,Object),le=ce,se=fe,ve=Object.prototype.hasOwnProperty;var pe=function(t){if(!le(t))return se(t);var r=[];for(var e in Object(t))ve.call(t,e)&&"constructor"!=e&&r.push(e);return r},he=I,ye=Dr;var de=function(t){return null!=t&&ye(t.length)&&!he(t)},be=ie,ge=pe,_e=de;var je=function(t){return _e(t)?be(t):ge(t)},Oe=zr,we=je;var me=de;var Se=function(t,r){return function(e,n){if(null==e)return e;if(!me(e))return t(e,n);for(var o=e.length,u=r?o:-1,i=Object(e);(r?u--:++u<o)&&!1!==n(i[u],u,i););return e}}((function(t,r){return t&&Oe(t,r,we)}));var Ae=function(t){return t},ze=Ae;var xe=Ar,Pe=Se,Ee=function(t){return"function"==typeof t?t:ze},ke=u;var Te=function(t,r){return(ke(t)?xe:Pe)(t,Ee(r))};!function(t){t.exports=Te}(Sr);var $e=o(mr),Fe=$t;var Ne=$t,Ie=Ft,Me=Qt;var Be=$t,Ce=function(){this.__data__=new Fe,this.size=0},Re=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e},Ue=function(t){return this.__data__.get(t)},De=function(t){return this.__data__.has(t)},qe=function(t,r){var e=this.__data__;if(e instanceof Ne){var n=e.__data__;if(!Ie||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new Me(n)}return e.set(t,r),this.size=e.size,this};function Le(t){var r=this.__data__=new Be(t);this.size=r.size}Le.prototype.clear=Ce,Le.prototype.delete=Re,Le.prototype.get=Ue,Le.prototype.has=De,Le.prototype.set=qe;var Ve=Le;var We=Qt,Je=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ge=function(t){return this.__data__.has(t)};function He(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new We;++r<e;)this.add(t[r])}He.prototype.add=He.prototype.push=Je,He.prototype.has=Ge;var Ke=He;var Qe=function(t,r){return t.has(r)},Xe=Ke,Ye=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1},Ze=Qe;var tn=function(t,r,e,n,o,u){var i=1&e,a=t.length,c=r.length;if(a!=c&&!(i&&c>a))return!1;var f=u.get(t),l=u.get(r);if(f&&l)return f==r&&l==t;var s=-1,v=!0,p=2&e?new Xe:void 0;for(u.set(t,r),u.set(r,t);++s<a;){var h=t[s],y=r[s];if(n)var d=i?n(y,h,s,r,t,u):n(h,y,s,t,r,u);if(void 0!==d){if(d)continue;v=!1;break}if(p){if(!Ye(r,(function(t,r){if(!Ze(p,r)&&(h===t||o(h,t,e,n,u)))return p.push(r)}))){v=!1;break}}else if(h!==y&&!o(h,y,e,n,u)){v=!1;break}}return u.delete(t),u.delete(r),v};var rn=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t,n){e[++r]=[n,t]})),e};var en=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t){e[++r]=t})),e},nn=f.Uint8Array,on=gt,un=tn,an=rn,cn=en,fn=l?l.prototype:void 0,ln=fn?fn.valueOf:void 0;var sn=function(t,r,e,n,o,u,i){switch(e){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!u(new nn(t),new nn(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return on(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var a=an;case"[object Set]":var c=1&n;if(a||(a=cn),t.size!=r.size&&!c)return!1;var f=i.get(t);if(f)return f==r;n|=2,i.set(t,r);var l=un(a(t),a(r),n,o,u,i);return i.delete(t),l;case"[object Symbol]":if(ln)return ln.call(t)==ln.call(r)}return!1};var vn=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t},pn=vn,hn=u;var yn=function(t,r,e){var n=r(t);return hn(t)?n:pn(n,e(t))};var dn=function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,u=[];++e<n;){var i=t[e];r(i,e,t)&&(u[o++]=i)}return u},bn=function(){return[]},gn=Object.prototype.propertyIsEnumerable,_n=Object.getOwnPropertySymbols,jn=yn,On=_n?function(t){return null==t?[]:(t=Object(t),dn(_n(t),(function(r){return gn.call(t,r)})))}:bn,wn=je;var mn=function(t){return jn(t,wn,On)},Sn=Object.prototype.hasOwnProperty;var An=function(t,r,e,n,o,u){var i=1&e,a=mn(t),c=a.length;if(c!=mn(r).length&&!i)return!1;for(var f=c;f--;){var l=a[f];if(!(i?l in r:Sn.call(r,l)))return!1}var s=u.get(t),v=u.get(r);if(s&&v)return s==r&&v==t;var p=!0;u.set(t,r),u.set(r,t);for(var h=i;++f<c;){var y=t[l=a[f]],d=r[l];if(n)var b=i?n(d,y,l,r,t,u):n(y,d,l,t,r,u);if(!(void 0===b?y===d||o(y,d,e,n,u):b)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var g=t.constructor,_=r.constructor;g==_||!("constructor"in t)||!("constructor"in r)||"function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _||(p=!1)}return u.delete(t),u.delete(r),p},zn=Z(f,"DataView"),xn=Z(f,"Promise"),Pn=Z(f,"Set"),En=zn,kn=Ft,Tn=xn,$n=Pn,Fn=Z(f,"WeakMap"),Nn=O,In=U,Mn="[object Map]",Bn="[object Promise]",Cn="[object Set]",Rn="[object WeakMap]",Un="[object DataView]",Dn=In(En),qn=In(kn),Ln=In(Tn),Vn=In($n),Wn=In(Fn),Jn=Nn;(En&&Jn(new En(new ArrayBuffer(1)))!=Un||kn&&Jn(new kn)!=Mn||Tn&&Jn(Tn.resolve())!=Bn||$n&&Jn(new $n)!=Cn||Fn&&Jn(new Fn)!=Rn)&&(Jn=function(t){var r=Nn(t),e="[object Object]"==r?t.constructor:void 0,n=e?In(e):"";if(n)switch(n){case Dn:return Un;case qn:return Mn;case Ln:return Bn;case Vn:return Cn;case Wn:return Rn}return r});var Gn=Jn,Hn=Ve,Kn=tn,Qn=sn,Xn=An,Yn=Gn,Zn=u,to=Br,ro=Yr,eo="[object Arguments]",no="[object Array]",oo="[object Object]",uo=Object.prototype.hasOwnProperty;var io=function(t,r,e,n,o,u){var i=Zn(t),a=Zn(r),c=i?no:Yn(t),f=a?no:Yn(r),l=(c=c==eo?oo:c)==oo,s=(f=f==eo?oo:f)==oo,v=c==f;if(v&&to(t)){if(!to(r))return!1;i=!0,l=!1}if(v&&!l)return u||(u=new Hn),i||ro(t)?Kn(t,r,e,n,o,u):Qn(t,r,c,e,n,o,u);if(!(1&e)){var p=l&&uo.call(t,"__wrapped__"),h=s&&uo.call(r,"__wrapped__");if(p||h){var y=p?t.value():t,d=h?r.value():r;return u||(u=new Hn),o(y,d,e,n,u)}}return!!v&&(u||(u=new Hn),Xn(t,r,e,n,o,u))},ao=w;var co=function t(r,e,n,o,u){return r===e||(null==r||null==e||!ao(r)&&!ao(e)?r!=r&&e!=e:io(r,e,n,o,t,u))},fo=Ve,lo=co;var so=T;var vo=function(t){return t==t&&!so(t)},po=vo,ho=je;var yo=function(t,r){return function(e){return null!=e&&(e[t]===r&&(void 0!==r||t in Object(e)))}},bo=function(t,r,e,n){var o=e.length,u=o,i=!n;if(null==t)return!u;for(t=Object(t);o--;){var a=e[o];if(i&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<u;){var c=(a=e[o])[0],f=t[c],l=a[1];if(i&&a[2]){if(void 0===f&&!(c in t))return!1}else{var s=new fo;if(n)var v=n(f,l,c,t,r,s);if(!(void 0===v?lo(l,f,3,n,s):v))return!1}}return!0},go=function(t){for(var r=ho(t),e=r.length;e--;){var n=r[e],o=t[n];r[e]=[n,o,po(o)]}return r},_o=yo;var jo=yr,Oo=Mr,wo=u,mo=Ur,So=Dr,Ao=br;var zo=function(t,r){return null!=t&&r in Object(t)},xo=function(t,r,e){for(var n=-1,o=(r=jo(r,t)).length,u=!1;++n<o;){var i=Ao(r[n]);if(!(u=null!=t&&e(t,i)))break;t=t[i]}return u||++n!=o?u:!!(o=null==t?0:t.length)&&So(o)&&mo(i,o)&&(wo(t)||Oo(t))};var Po=co,Eo=wr,ko=function(t,r){return null!=t&&xo(t,r,zo)},To=k,$o=vo,Fo=yo,No=br;var Io=function(t){return function(r){return null==r?void 0:r[t]}},Mo=jr;var Bo=Io,Co=function(t){return function(r){return Mo(r,t)}},Ro=k,Uo=br;var Do=function(t){var r=go(t);return 1==r.length&&r[0][2]?_o(r[0][0],r[0][1]):function(e){return e===t||bo(e,t,r)}},qo=function(t,r){return To(t)&&$o(r)?Fo(No(t),r):function(e){var n=Eo(e,t);return void 0===n&&n===r?ko(e,t):Po(r,n,3)}},Lo=Ae,Vo=u,Wo=function(t){return Ro(t)?Bo(Uo(t)):Co(t)};var Jo=Se,Go=de;var Ho=nr,Ko=function(t){return"function"==typeof t?t:null==t?Lo:"object"==typeof t?Vo(t)?qo(t[0],t[1]):Do(t):Wo(t)},Qo=function(t,r){var e=-1,n=Go(t)?Array(t.length):[];return Jo(t,(function(t,o,u){n[++e]=r(t,o,u)})),n},Xo=u;var Yo=function(t,r){return(Xo(t)?Ho:Qo)(t,Ko(r))},Zo=Mr,tu=u,ru=l?l.isConcatSpreadable:void 0;var eu=vn,nu=function(t){return tu(t)||Zo(t)||!!(ru&&t&&t[ru])};var ou=function t(r,e,n,o,u){var i=-1,a=r.length;for(n||(n=nu),u||(u=[]);++i<a;){var c=r[i];e>0&&n(c)?e>1?t(c,e-1,n,o,u):eu(u,c):o||(u[u.length]=c)}return u};var uu=vn,iu=ou,au=function(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r},cu=u;var fu=function(){var t=arguments.length;if(!t)return[];for(var r=Array(t-1),e=arguments[0],n=t;n--;)r[n-1]=arguments[n];return uu(cu(e)?au(e):[e],iu(r,1))};function lu(t){return"[object Array]"===Object.prototype.toString.call(t)}function su(t){return"[object Undefined]"===Object.prototype.toString.call(t)}function vu(t){return"[object Object]"===Object.prototype.toString.call(t)}function pu(t){return"[object String]"===Object.prototype.toString.call(t)}function hu(t){return!!su(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(vu(t)){for(let r in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!pu(t)||""!==t)}(t)||!!function(t){return!!lu(t)&&0===t.length}(t))))}function yu(t){return!!lu(t)&&(0!==t.length&&(1!==t.length||!hu(t[0])))}function du(t){if(vu(t)){for(let r in t)return!0;return!1}return!1}var bu=function(t,r,e,n){for(var o=t.length,u=e+(n?1:-1);n?u--:++u<o;)if(r(t[u],u,t))return u;return-1},gu=function(t){return t!=t},_u=function(t,r,e){for(var n=e-1,o=t.length;++n<o;)if(t[n]===r)return n;return-1};var ju=function(t,r,e){return r==r?_u(t,r,e):bu(t,gu,e)};var Ou=function(t,r){return!!(null==t?0:t.length)&&ju(t,r,0)>-1};var wu=function(t,r,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(e(r,t[n]))return!0;return!1};var mu=Pn,Su=function(){},Au=mu&&1/en(new mu([,-0]))[1]==1/0?function(t){return new mu(t)}:Su,zu=Ke,xu=Ou,Pu=wu,Eu=Qe,ku=Au,Tu=en;var $u=function(t,r,e){var n=-1,o=xu,u=t.length,i=!0,a=[],c=a;if(e)i=!1,o=Pu;else if(u>=200){var f=r?null:ku(t);if(f)return Tu(f);i=!1,o=Eu,c=new zu}else c=r?[]:a;t:for(;++n<u;){var l=t[n],s=r?r(l):l;if(l=e||0!==l?l:0,i&&s==s){for(var v=c.length;v--;)if(c[v]===s)continue t;r&&c.push(s),a.push(l)}else o(c,s,e)||(c!==a&&c.push(s),a.push(l))}return a};var Fu=function(t){return t&&t.length?$u(t):[]};function Nu(t){if(!yu(t))return[];let r=[];return $e(t,(function(t){let e=je(t);r=[...r,...e],r=Fu(r)})),r}var Iu=O,Mu=u,Bu=w;var Cu=function(t){return"string"==typeof t||!Mu(t)&&Bu(t)&&"[object String]"==Iu(t)},Ru=Io("length"),Uu=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Du=function(t){return Uu.test(t)},qu="\\ud800-\\udfff",Lu="["+qu+"]",Vu="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Wu="\\ud83c[\\udffb-\\udfff]",Ju="[^"+qu+"]",Gu="(?:\\ud83c[\\udde6-\\uddff]){2}",Hu="[\\ud800-\\udbff][\\udc00-\\udfff]",Ku="(?:"+Vu+"|"+Wu+")"+"?",Qu="[\\ufe0e\\ufe0f]?",Xu=Qu+Ku+("(?:\\u200d(?:"+[Ju,Gu,Hu].join("|")+")"+Qu+Ku+")*"),Yu="(?:"+[Ju+Vu+"?",Vu,Gu,Hu,Lu].join("|")+")",Zu=RegExp(Wu+"(?="+Wu+")|"+Yu+Xu,"g");var ti=Ru,ri=Du,ei=function(t){for(var r=Zu.lastIndex=0;Zu.test(t);)++r;return r};var ni=pe,oi=Gn,ui=de,ii=Cu,ai=function(t){return ri(t)?ei(t):ti(t)};var ci=function(t){if(null==t)return 0;if(ui(t))return ii(t)?ai(t):t.length;var r=oi(t);return"[object Map]"==r||"[object Set]"==r?t.size:ni(t).length};function fi(t){return!(!pu(t)||""===t)}function li(t){let r=!1;return fi(t)?r=!isNaN(Number(t)):function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(r=!0),r}var si=O,vi=w;var pi=function(t){return!0===t||!1===t||vi(t)&&"[object Boolean]"==si(t)};function hi(t){return pi(t)}function yi(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!yu(t))return[];if(yu(r)||(r=Nu(t)),0===ci(r))return[];let e=!1;if($e(t,(function(t){du(t)||(e=!0)})),e)return[];let n=[];return $e(t,(function(t){let e=Yo(r,(function(r){return hi(t[r])?t[r]?"true":"false":pu(t[r])||li(t[r])?t[r]:function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(su(t))return"";let e="";try{e=r?JSON.stringify(t,null,2):JSON.stringify(t)}catch(t){e=""}return e}(t[r])}));n.push(e)})),n}var di=Array.prototype.join;var bi=function(t,r){return null==t?"":di.call(t,r)};function gi(t,r,e){if(!fi(t))return"";if(!fi(r))return"";if(!pu(e))return"";let n=new RegExp(r,"g");return String(t).replace(n,e)}function _i(t){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"\ufeff":"";return $e(t,(t=>{let e=[];$e(t,(t=>{pu(t)?(t=gi(t,"\r\n",""),t=gi(t,"\r",""),t=`"${t=gi(t,"\n","")}"`):t=hi(t)?t?"true":"false":function(t){if(!fi(t)&&!li(t)&&!A(t))return"";let r="";try{r=String(t)}catch(t){}try{r=t.toString()}catch(t){}return r}(t),e.push(t)})),r+=bi(e,",")+"\r\n"})),r}let ji={readCsv:async function(n){let o=[],u=function(){let t,r,e=new Promise((function(){t=arguments[0],r=arguments[1]}));return e.resolve=t,e.reject=r,e}();return t.createReadStream(n).pipe(e()).pipe(r()).on("data",(t=>{o.push(t)})).on("end",(()=>{u.resolve(o)})).on("error",(t=>{u.reject(t)})),u},writeCsv:async function(r,e){let n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=null,i="",a=wr(o,"mode");if("ltdt"!==a&&"mat"!==a&&(a="ltdt"),"mat"===a)n=e;else if("ltdt"===a)try{n=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!yu(t))return[];yu(r)||(r=Nu(t)),du(e)||(e={},$e(r,(t=>{e[t]=t})));let n=!1;if($e(t,(function(t){du(t)||(n=!0)})),n)return[];let o=Yo(r,(function(t){return wr(e,t)})),u=yi(t,r);return fu([o],u)}(e,wr(o,"keys"),wr(o,"kphead"))}catch(t){return u=t.toString(),Promise.reject(u)}try{i=function(t){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!yu(t))return{error:"no data"};let e=null;try{e=_i(t,r)}catch(t){return{error:t}}return e}(n)}catch(t){return u=t.toString(),Promise.reject(u)}try{t.writeFileSync(r,i,"utf8")}catch(t){return u=t.toString(),Promise.reject(u)}return"finish"}};return ji}));
//# sourceMappingURL=w-data-csv.umd.js.map
